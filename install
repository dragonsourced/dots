#!/bin/sh
#
# Clone various repositories and move them to the proper place.

# Initialize all the submodules.
git submodule update --init --recursive

# install(from, to, script)

install() {
    mkdir -p "$(dirname "$2")"

    [ -L "$2" ] && rm "$2"

    if [ -f "$2" ] || [ -d "$2" ]; then
        echo "$1 is already installed"
    else
        echo "$1 -> $2"
        ln -s "$PWD/$1" "$2"
	script="$PWD/scripts/$1"
	if [ -f "$script" ]; then
		(
			cd "$2" || exit
			sh "$script"
		)
	fi
    fi
}

# Install various files
make install -C sub/sowm

install sub/nvim ~/.config/nvim
install sub/sowm ~/src/ui/sowm
